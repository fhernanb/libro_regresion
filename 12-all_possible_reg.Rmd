# Todas las regresiones posibles {#allpossibleregre}
En este capítulo se muestra como elegir el mejor modelo de regresión cuando es posible ajustar o entrenar todos los posibles modelos relacionados a un problema.

## Criterios para elegir modelos
A continuación una lista de los posibles indicadores y el ideal de cada uno de ellos.

- $R^2$: coeficiente de determinación, entre más grande mejor.
- $R^2_A$: coeficiente de determinación ajustado, entre más grande mejor.
- $C_p$ de Mallows: el mejor modelo es aquél para el cual $C_p$ es el más pequeño posible.
- $AIC$: Akaike Information Criterium, entre más pequeño mejor.

## Paquete **olsrr** {-}
El paquete **olsrr** creado por @R-olsrr contiene varias funciones útiles para modelación, en particular se destaca la función `ols_step_all_possible` que se puede utilizar para obtener todas las regresiones posibles.

Si un modelo tiene inicialmente $k$ variables cuantitativas entonces se pueden construir $2^k$ modelos diferentes con subconjuntos de las variables originales. A continuación un ejemplo de cómo crece el número de todas las regresiones posibles en función del número $k$ de covariables.

```{r, echo=FALSE}
k <- c(2, 4, 8, 16, 32)
num_de_regresiones <- 2^k
cbind(k, num_de_regresiones)
```

### Ejemplo {-}
En este ejemplo vamos a usar la base de datos `mtcars` para crear todas las regresiones posibles para explicar `mpg` en función de las variables `disp`, `hp`, `wt`, `qsec`, a continuación una parte de la base de datos.

```{r}
head(mtcars)
```

A continuación el código para ajustar el modelo saturado y luego crear todas las regresiones posibles.

```{r message=FALSE}
model <- lm(mpg ~ disp + hp + wt + qsec, data=mtcars)

library(olsrr)
res <- ols_step_all_possible(model)
res
```

Los resultados anteriores se pueden ver de forma gráfica así:

```{r selection05}
plot(res)
```

Se le recomienda al lector explorar las viñetas del paquete [olsrr](https://cran.r-project.org/web/packages/olsrr/index.html) para conocer todas las bondades del paquete.

